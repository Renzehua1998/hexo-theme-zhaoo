<div class="preview">
  <!-- <nav class="navbar j-navbar-menu">
    <i class="iconfont iconmenu"></i>
  </nav> -->
  <div class="preview-image">
        <% if (theme.preview.type==='cloud' ) { %>
          <%- image_tag("/images/theme/cloud.png", {class: "preview-overlay" , draggable:"false"}) %>
            <% } else { %>
              <div class="preview-overlay">
                <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                  viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                  <defs>
                    <path id="gentle-wave"
                      d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
                  </defs>
                  <g class="preview-parallax">
                    <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(var(--color-background-rgb),0.7"></use>
                    <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(var(--color-background-rgb),0.5)"></use>
                    <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(var(--color-background-rgb),0.3)"></use>
                    <use xlink:href="#gentle-wave" x="48" y="7" fill="var(--color-background)"></use>
                  </g>
                </svg>
              </div>
              <% } %>
  </div>
  <div class="preview-motto-wrapper">
    <span class="STYLE1" style="color: red">💕</span>
    <h2 class="preview-motto" id="motto">
      <% if (!theme.preview.motto.typing) { %>
        <%= theme.preview.motto.default %>
          <% } %>
    </h2>
    <% if (theme.preview.motto.typing) { %>
      <span class="preview-cursor">_</span>
      <% } %>
    <span class="STYLE1" style="color: red">💕</span>
  </div>
  <div div class="preview-avatar-father">
    <div class="preview-avatar">
      <div class="love-icon" id="heart-beat">
      </div>
    </div>
  </div>
  <div class="together">
    <b id="span_dt_dt">这是我们在一起的</b>
  </div>
  <div class="timer">
    <b id="d"></b> &nbsp;天&nbsp; <b id="h"></b> &nbsp;小时&nbsp; <b id="m"></b> &nbsp;分钟&nbsp; <b id="s"></b> &nbsp;秒
  </div>
  <div class="preview-scroll">
    <a href="#container" class="smooth-scroll"><i class="iconfont iconMouse"></i></a>
  </div>
  <script>
    // JavaScript代码
    const heartBeatDiv = document.getElementById('heart-beat');
    let scale = 1; // 初始缩放比例
    let direction = 1; // 方向：1表示放大，-1表示缩小
    const maxScale = 1.8; // 最大缩放比例
    const minScale = 1; // 最小缩放比例
    const speedBig = 0.01; // 变大速度
    const speedSmall = 0.02; // 变小速度
    

    function animateHeartBeat() {
      if (direction > 0) {
        scale += direction * speedBig; // 根据方向调整缩放比例
      } else {
        scale += direction * speedSmall;
      }
      
      heartBeatDiv.style.transform = `scale(${scale})`; // 动态更新CSS的transform属性

      // 判断是否达到最大或最小缩放比例，改变方向
      if (scale >= maxScale) {
        direction = -1;
      } else if (scale <= minScale) {
        direction = 1;
      }

      requestAnimationFrame(animateHeartBeat); // 使用requestAnimationFrame实现循环动画
    }

    // 开始动画
    animateHeartBeat();
  </script>
  <script>
    function timer() {
        var start = new Date(2025, 4, 20); // 2015.7.2
        var t = new Date() - start;
        var h = ~~(t / 1000 / 60 / 60 % 24);
        if (h < 10) {
            h = "0" + h;
        }
        var m = ~~(t / 1000 / 60 % 60);
        if (m < 10) {
            m = "0" + m;
        }

        var s = ~~(t / 1000 % 60);
        if (s < 10) {
            s = "0" + s;
        }
        document.getElementById('d').innerHTML = ~~(t / 1000 / 60 / 60 / 24);
        document.getElementById('h').innerHTML = h;
        document.getElementById('m').innerHTML = m;
        document.getElementById('s').innerHTML = s;
    }
    timer();
    setInterval(timer, 1000);
</script>
</div>
